angular.module('angularvideo', ['ui.router', 'ngSanitize']).config(["$stateProvider", "$urlRouterProvider", function($stateProvider, $urlRouterProvider) {
  $urlRouterProvider.otherwise('/videos');
  return $stateProvider.state('videos', {
    url: '/videos',
    templateUrl: 'videos.tpl.html',
    controller: 'VideosCtrl'
  }).state('video', {
    url: '/video/:id',
    templateUrl: 'video.tpl.html',
    controller: 'VideoCtrl'
  });
}]);

angular.module('angularvideo').factory('Videos', ["$http", "$q", function($http, $q) {
  return {
    getAll: function() {
      var deferred;
      deferred = $q.defer();
      $http.get('/api/videos').success(function(data, status, headers, config) {
        return deferred.resolve(data, status, headers, config);
      }).error(function(data, status, headers, config) {
        return deferred.reject(data, status, headers, config);
      });
      return deferred.promise;
    },
    getOne: function(id) {
      var deferred;
      deferred = $q.defer();
      $http.get("/api/videos/one/" + parseInt(id)).success(function(data, status, headers, config) {
        return deferred.resolve(data, status, headers, config);
      }).error(function(data, status, headers, config) {
        return deferred.reject(data, status, headers, config);
      });
      return deferred.promise;
    }
  };
}]);

angular.module('angularvideo').controller('VideoCtrl', ["$scope", "$sce", "$stateParams", "Videos", function($scope, $sce, $stateParams, Videos) {
  var idVideo;
  idVideo = JSON.parse($stateParams.id);
  return Videos.getOne(idVideo).then(function(video) {
    video.src = $sce.trustAsResourceUrl(video.src);
    $scope.video = video;
    return setTimeout(function() {
      return document.querySelector('body > div > video:nth-child(2)').load();
    }, 0);
  }, function(reason) {
    return alert(reason);
  });
}]);

angular.module('angularvideo').directive('secondsToMinutes', function() {
  return {
    scope: {
      video: '@'
    },
    link: function(scope, element, attr) {
      var secondsToMinutes;
      secondsToMinutes = function(time) {
        var secs;
        var mins;
        var hrs, mins, ret, secs;
        mins = ~~(time / 60);
        secs = time % 60;
        hrs = ~~(time / 3600);
        mins = ~~(time % 3600 / 60);
        secs = time % 60;
        ret = '';
        if (hrs > 0) {
          ret += '' + hrs + ':' + (mins < 10 ? '0' : '');
        }
        if (mins < 10) {
          mins += '0';
        }
        ret += '' + mins + ':' + (secs < 10 ? '0' : '');
        ret += '' + secs;
        return ret;
      };
      return element.replaceWith(secondsToMinutes(attr.secondsToMinutes));
    }
  };
});

angular.module('angularvideo').controller('VideosCtrl', ["$scope", "Videos", function($scope, Videos) {
  $scope.videos = [];
  return Videos.getAll().then(function(videos) {
    return $scope.videos = videos.data;
  }, function(reason) {
    return alert(reason);
  });
}]);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5jb2ZmZWUiLCJhcHAuanMiLCJzaGFyZWQvc2VydmljZS5jb2ZmZWUiLCJzaGFyZWQvc2VydmljZS5qcyIsInZpZGVvL2NvbnRyb2xsZXIuY29mZmVlIiwidmlkZW8vY29udHJvbGxlci5qcyIsInZpZGVvL2RpcmVjdGl2ZXMuY29mZmVlIiwidmlkZW8vZGlyZWN0aXZlcy5qcyIsInZpZGVvcy9jb250cm9sbGVyLmNvZmZlZSIsInZpZGVvcy9jb250cm9sbGVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFFBQVEsT0FBTyxnQkFBZ0IsQ0FDM0IsYUFDQSxlQUVILGdEQUFPLFNBQUMsZ0JBQWdCLG9CQUFqQjtFQUVKLG1CQUFtQixVQUFVO0VDSi9CLE9ETUUsZUFDSyxNQUFNLFVBQ0g7SUFBQSxLQUFLO0lBQ0wsYUFBYTtJQUNiLFlBQVk7S0FDZixNQUFNLFNBQ0g7SUFBQSxLQUFLO0lBQ0wsYUFBYTtJQUNiLFlBQVk7OztBQ0p4QjtBQ1pBLFFBQVEsT0FBTyxnQkFBZ0IsUUFBUSwwQkFBVSxTQUFDLE9BQU8sSUFBUjtFQ0MvQyxPREFFO0lBQ0ksUUFBUSxXQUFBO01BQ0osSUFBQTtNQUFBLFdBQVcsR0FBRztNQUNkLE1BQU0sSUFBSSxlQUNMLFFBQVEsU0FBQyxNQUFNLFFBQVEsU0FBUyxRQUF4QjtRQ0NqQixPREFZLFNBQVMsUUFBUSxNQUFNLFFBQVEsU0FBUztTQUUzQyxNQUFNLFNBQUMsTUFBTSxRQUFRLFNBQVMsUUFBeEI7UUNBZixPRENZLFNBQVMsT0FBTyxNQUFNLFFBQVEsU0FBUzs7TUFFL0MsT0FBTyxTQUFTOztJQUNwQixRQUFRLFNBQUMsSUFBRDtNQUNKLElBQUE7TUFBQSxXQUFXLEdBQUc7TUFDZCxNQUFNLElBQUkscUJBQXFCLFNBQVMsS0FDbkMsUUFBUSxTQUFDLE1BQU0sUUFBUSxTQUFTLFFBQXhCO1FDQ2pCLE9EQVksU0FBUyxRQUFRLE1BQU0sUUFBUSxTQUFTO1NBRTNDLE1BQU0sU0FBQyxNQUFNLFFBQVEsU0FBUyxRQUF4QjtRQ0FmLE9EQ1ksU0FBUyxPQUFPLE1BQU0sUUFBUSxTQUFTOztNQUUvQyxPQUFPLFNBQVM7Ozs7QUNHNUI7QUN4QkEsUUFBUSxPQUFPLGdCQUFnQixXQUFXLDBEQUFhLFNBQUMsUUFBUSxNQUFNLGNBQWMsUUFBN0I7RUFDbkQsSUFBQTtFQUFBLFVBQVUsS0FBSyxNQUFNLGFBQWE7RUNFcEMsT0RERSxPQUFPLE9BQU8sU0FBUyxLQUFLLFNBQUMsT0FBRDtJQUV4QixNQUFNLE1BQU0sS0FBSyxtQkFBbUIsTUFBTTtJQUMxQyxPQUFPLFFBQVE7SUNDbkIsT0RFSSxXQUFXLFdBQUE7TUNEYixPREVNLFNBQVMsY0FBYyxtQ0FBbUM7T0FDNUQ7S0FFSixTQUFDLFFBQUQ7SUNGRixPREdJLE1BQU07OztBQ0FkO0FDYkEsUUFBUSxPQUFPLGdCQUFnQixVQUFVLG9CQUFvQixXQUFBO0VDQzNELE9EQUU7SUFDSSxPQUNJO01BQUEsT0FBTzs7SUFDWCxNQUFNLFNBQUMsT0FBTyxTQUFTLE1BQWpCO01BQ0YsSUFBQTtNQUFBLG1CQUFtQixTQUFDLE1BQUQ7UUFDZixJQUFBO1FBQ0EsSUFBQTtRQURBLElBQUEsS0FBQSxNQUFBLEtBQUE7UUFHQSxPQUFPLENBQUEsRUFBSSxPQUFPO1FBQ2xCLE9BQU8sT0FBTztRQUVkLE1BQU0sQ0FBQSxFQUFJLE9BQU87UUFDakIsT0FBTyxDQUFBLEVBQUksT0FBTyxPQUFPO1FBQ3pCLE9BQU8sT0FBTztRQUVkLE1BQU07UUFDTixJQUFHLE1BQU0sR0FBVDtVQUNFLE9BQU8sS0FBSyxNQUFNLE9BQVUsT0FBTyxLQUFRLE1BQVM7O1FBQ3RELElBQUcsT0FBTyxJQUFWO1VBQWtCLFFBQVE7O1FBQzFCLE9BQU8sS0FBSyxPQUFPLE9BQVUsT0FBTyxLQUFRLE1BQVM7UUFDckQsT0FBTyxLQUFLO1FBQ1osT0FBTzs7TUNLakIsT0RKTSxRQUFRLFlBQVksaUJBQWlCLEtBQUs7Ozs7QUNRdEQ7QUMvQkEsUUFBUSxPQUFPLGdCQUFnQixXQUFXLG1DQUFjLFNBQUMsUUFBUSxRQUFUO0VBQ3BELE9BQU8sU0FBUztFQ0NsQixPREFFLE9BQU8sU0FBUyxLQUFLLFNBQUMsUUFBRDtJQ0NyQixPREFJLE9BQU8sU0FBUyxPQUFPO0tBQ3pCLFNBQUMsUUFBRDtJQ0NGLE9EQUksTUFBTTs7O0FDR2QiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImFuZ3VsYXIubW9kdWxlKCdhbmd1bGFydmlkZW8nLCBbXG4gICAgJ3VpLnJvdXRlcicsXG4gICAgJ25nU2FuaXRpemUnXG5dKVxuLmNvbmZpZyAoJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlcikgLT5cblxuICAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy92aWRlb3MnKVxuXG4gICAgJHN0YXRlUHJvdmlkZXJcbiAgICAgICAgLnN0YXRlICd2aWRlb3MnLFxuICAgICAgICAgICAgdXJsOiAnL3ZpZGVvcycsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZGVvcy50cGwuaHRtbCdcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdWaWRlb3NDdHJsJ1xuICAgICAgICAuc3RhdGUgJ3ZpZGVvJyxcbiAgICAgICAgICAgIHVybDogJy92aWRlby86aWQnLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWRlby50cGwuaHRtbCdcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdWaWRlb0N0cmwnXG4iLCJhbmd1bGFyLm1vZHVsZSgnYW5ndWxhcnZpZGVvJywgWyd1aS5yb3V0ZXInLCAnbmdTYW5pdGl6ZSddKS5jb25maWcoZnVuY3Rpb24oJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlcikge1xuICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCcvdmlkZW9zJyk7XG4gIHJldHVybiAkc3RhdGVQcm92aWRlci5zdGF0ZSgndmlkZW9zJywge1xuICAgIHVybDogJy92aWRlb3MnLFxuICAgIHRlbXBsYXRlVXJsOiAndmlkZW9zLnRwbC5odG1sJyxcbiAgICBjb250cm9sbGVyOiAnVmlkZW9zQ3RybCdcbiAgfSkuc3RhdGUoJ3ZpZGVvJywge1xuICAgIHVybDogJy92aWRlby86aWQnLFxuICAgIHRlbXBsYXRlVXJsOiAndmlkZW8udHBsLmh0bWwnLFxuICAgIGNvbnRyb2xsZXI6ICdWaWRlb0N0cmwnXG4gIH0pO1xufSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnYW5ndWxhcnZpZGVvJykuZmFjdG9yeSAnVmlkZW9zJywgKCRodHRwLCAkcSktPlxuICAgIHtcbiAgICAgICAgZ2V0QWxsOiAtPlxuICAgICAgICAgICAgZGVmZXJyZWQgPSAkcS5kZWZlcigpXG4gICAgICAgICAgICAkaHR0cC5nZXQoJy9hcGkvdmlkZW9zJylcbiAgICAgICAgICAgICAgICAuc3VjY2VzcygoZGF0YSwgc3RhdHVzLCBoZWFkZXJzLCBjb25maWcpLT5cbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShkYXRhLCBzdGF0dXMsIGhlYWRlcnMsIGNvbmZpZylcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgLmVycm9yKChkYXRhLCBzdGF0dXMsIGhlYWRlcnMsIGNvbmZpZyktPlxuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoZGF0YSwgc3RhdHVzLCBoZWFkZXJzLCBjb25maWcpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2VcbiAgICAgICAgZ2V0T25lOiAoaWQpLT5cbiAgICAgICAgICAgIGRlZmVycmVkID0gJHEuZGVmZXIoKVxuICAgICAgICAgICAgJGh0dHAuZ2V0KFwiL2FwaS92aWRlb3Mvb25lL1wiICsgcGFyc2VJbnQoaWQpKVxuICAgICAgICAgICAgICAgIC5zdWNjZXNzKChkYXRhLCBzdGF0dXMsIGhlYWRlcnMsIGNvbmZpZyktPlxuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGRhdGEsIHN0YXR1cywgaGVhZGVycywgY29uZmlnKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAuZXJyb3IoKGRhdGEsIHN0YXR1cywgaGVhZGVycywgY29uZmlnKS0+XG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChkYXRhLCBzdGF0dXMsIGhlYWRlcnMsIGNvbmZpZylcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZVxuICAgIH1cbiIsImFuZ3VsYXIubW9kdWxlKCdhbmd1bGFydmlkZW8nKS5mYWN0b3J5KCdWaWRlb3MnLCBmdW5jdGlvbigkaHR0cCwgJHEpIHtcbiAgcmV0dXJuIHtcbiAgICBnZXRBbGw6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGRlZmVycmVkO1xuICAgICAgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgJGh0dHAuZ2V0KCcvYXBpL3ZpZGVvcycpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSwgc3RhdHVzLCBoZWFkZXJzLCBjb25maWcpIHtcbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnJlc29sdmUoZGF0YSwgc3RhdHVzLCBoZWFkZXJzLCBjb25maWcpO1xuICAgICAgfSkuZXJyb3IoZnVuY3Rpb24oZGF0YSwgc3RhdHVzLCBoZWFkZXJzLCBjb25maWcpIHtcbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnJlamVjdChkYXRhLCBzdGF0dXMsIGhlYWRlcnMsIGNvbmZpZyk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgIH0sXG4gICAgZ2V0T25lOiBmdW5jdGlvbihpZCkge1xuICAgICAgdmFyIGRlZmVycmVkO1xuICAgICAgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgJGh0dHAuZ2V0KFwiL2FwaS92aWRlb3Mvb25lL1wiICsgcGFyc2VJbnQoaWQpKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cywgaGVhZGVycywgY29uZmlnKSB7XG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5yZXNvbHZlKGRhdGEsIHN0YXR1cywgaGVhZGVycywgY29uZmlnKTtcbiAgICAgIH0pLmVycm9yKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cywgaGVhZGVycywgY29uZmlnKSB7XG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5yZWplY3QoZGF0YSwgc3RhdHVzLCBoZWFkZXJzLCBjb25maWcpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICB9XG4gIH07XG59KTtcbiIsImFuZ3VsYXIubW9kdWxlKCdhbmd1bGFydmlkZW8nKS5jb250cm9sbGVyICdWaWRlb0N0cmwnLCAoJHNjb3BlLCAkc2NlLCAkc3RhdGVQYXJhbXMsIFZpZGVvcyktPlxuICAgIGlkVmlkZW8gPSBKU09OLnBhcnNlKCRzdGF0ZVBhcmFtcy5pZClcbiAgICBWaWRlb3MuZ2V0T25lKGlkVmlkZW8pLnRoZW4gKHZpZGVvKS0+XG4gICAgICAgICMgY2Fubm90IGJlIHNldCB3aXRoICRzY2VEZWxlZ2F0ZVByb3ZpZGVyIHNpbmNlIHRoZSB1cmwgY291bGQgYmUgYW55dGhpbmdcbiAgICAgICAgdmlkZW8uc3JjID0gJHNjZS50cnVzdEFzUmVzb3VyY2VVcmwodmlkZW8uc3JjKVxuICAgICAgICAkc2NvcGUudmlkZW8gPSB2aWRlb1xuICAgICAgICAjIGZvcmNlIHRoZSB2aWRlbyB0byByZWxvYWQgd2l0aCB0aGUgbmV3IHRhZ1xuICAgICAgICAjIFRvRG86IGNyZWF0ZSBhIGRpcmVjdGl2ZVxuICAgICAgICBzZXRUaW1lb3V0IC0+XG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5ID4gZGl2ID4gdmlkZW86bnRoLWNoaWxkKDIpJykubG9hZCgpXG4gICAgICAgICwgMFxuXG4gICAgLCAocmVhc29uKS0+XG4gICAgICAgIGFsZXJ0KHJlYXNvbilcblxuXG4iLCJhbmd1bGFyLm1vZHVsZSgnYW5ndWxhcnZpZGVvJykuY29udHJvbGxlcignVmlkZW9DdHJsJywgZnVuY3Rpb24oJHNjb3BlLCAkc2NlLCAkc3RhdGVQYXJhbXMsIFZpZGVvcykge1xuICB2YXIgaWRWaWRlbztcbiAgaWRWaWRlbyA9IEpTT04ucGFyc2UoJHN0YXRlUGFyYW1zLmlkKTtcbiAgcmV0dXJuIFZpZGVvcy5nZXRPbmUoaWRWaWRlbykudGhlbihmdW5jdGlvbih2aWRlbykge1xuICAgIHZpZGVvLnNyYyA9ICRzY2UudHJ1c3RBc1Jlc291cmNlVXJsKHZpZGVvLnNyYyk7XG4gICAgJHNjb3BlLnZpZGVvID0gdmlkZW87XG4gICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keSA+IGRpdiA+IHZpZGVvOm50aC1jaGlsZCgyKScpLmxvYWQoKTtcbiAgICB9LCAwKTtcbiAgfSwgZnVuY3Rpb24ocmVhc29uKSB7XG4gICAgcmV0dXJuIGFsZXJ0KHJlYXNvbik7XG4gIH0pO1xufSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnYW5ndWxhcnZpZGVvJykuZGlyZWN0aXZlICdzZWNvbmRzVG9NaW51dGVzJywgLT5cbiAgICB7XG4gICAgICAgIHNjb3BlOlxuICAgICAgICAgICAgdmlkZW86ICdAJ1xuICAgICAgICBsaW5rOiAoc2NvcGUsIGVsZW1lbnQsIGF0dHIpLT5cbiAgICAgICAgICAgIHNlY29uZHNUb01pbnV0ZXMgPSAodGltZSktPlxuICAgICAgICAgICAgICAgIGB2YXIgc2Vjc2BcbiAgICAgICAgICAgICAgICBgdmFyIG1pbnNgXG4gICAgICAgICAgICAgICAgIyBNaW51dGVzIGFuZCBzZWNvbmRzXG4gICAgICAgICAgICAgICAgbWlucyA9IH4gfih0aW1lIC8gNjApXG4gICAgICAgICAgICAgICAgc2VjcyA9IHRpbWUgJSA2MFxuICAgICAgICAgICAgICAgICMgSG91cnMsIG1pbnV0ZXMgYW5kIHNlY29uZHNcbiAgICAgICAgICAgICAgICBocnMgPSB+IH4odGltZSAvIDM2MDApXG4gICAgICAgICAgICAgICAgbWlucyA9IH4gfih0aW1lICUgMzYwMCAvIDYwKVxuICAgICAgICAgICAgICAgIHNlY3MgPSB0aW1lICUgNjBcbiAgICAgICAgICAgICAgICAjIE91dHB1dCBsaWtlIFwiMTowMVwiIG9yIFwiNDowMzo1OVwiIG9yIFwiMTIzOjAzOjU5XCJcbiAgICAgICAgICAgICAgICByZXQgPSAnJ1xuICAgICAgICAgICAgICAgIGlmIGhycyA+IDBcbiAgICAgICAgICAgICAgICAgIHJldCArPSAnJyArIGhycyArICc6JyArIChpZiBtaW5zIDwgMTAgdGhlbiAnMCcgZWxzZSAnJylcbiAgICAgICAgICAgICAgICBpZiBtaW5zIDwgMTAgdGhlbiBtaW5zICs9ICcwJ1xuICAgICAgICAgICAgICAgIHJldCArPSAnJyArIG1pbnMgKyAnOicgKyAoaWYgc2VjcyA8IDEwIHRoZW4gJzAnIGVsc2UgJycpXG4gICAgICAgICAgICAgICAgcmV0ICs9ICcnICsgc2Vjc1xuICAgICAgICAgICAgICAgIHJldHVybiByZXRcbiAgICAgICAgICAgIGVsZW1lbnQucmVwbGFjZVdpdGgoc2Vjb25kc1RvTWludXRlcyhhdHRyLnNlY29uZHNUb01pbnV0ZXMpKVxuICAgIH1cbiIsImFuZ3VsYXIubW9kdWxlKCdhbmd1bGFydmlkZW8nKS5kaXJlY3RpdmUoJ3NlY29uZHNUb01pbnV0ZXMnLCBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHtcbiAgICBzY29wZToge1xuICAgICAgdmlkZW86ICdAJ1xuICAgIH0sXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcbiAgICAgIHZhciBzZWNvbmRzVG9NaW51dGVzO1xuICAgICAgc2Vjb25kc1RvTWludXRlcyA9IGZ1bmN0aW9uKHRpbWUpIHtcbiAgICAgICAgdmFyIHNlY3M7XG4gICAgICAgIHZhciBtaW5zO1xuICAgICAgICB2YXIgaHJzLCBtaW5zLCByZXQsIHNlY3M7XG4gICAgICAgIG1pbnMgPSB+fih0aW1lIC8gNjApO1xuICAgICAgICBzZWNzID0gdGltZSAlIDYwO1xuICAgICAgICBocnMgPSB+fih0aW1lIC8gMzYwMCk7XG4gICAgICAgIG1pbnMgPSB+fih0aW1lICUgMzYwMCAvIDYwKTtcbiAgICAgICAgc2VjcyA9IHRpbWUgJSA2MDtcbiAgICAgICAgcmV0ID0gJyc7XG4gICAgICAgIGlmIChocnMgPiAwKSB7XG4gICAgICAgICAgcmV0ICs9ICcnICsgaHJzICsgJzonICsgKG1pbnMgPCAxMCA/ICcwJyA6ICcnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWlucyA8IDEwKSB7XG4gICAgICAgICAgbWlucyArPSAnMCc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0ICs9ICcnICsgbWlucyArICc6JyArIChzZWNzIDwgMTAgPyAnMCcgOiAnJyk7XG4gICAgICAgIHJldCArPSAnJyArIHNlY3M7XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgICB9O1xuICAgICAgcmV0dXJuIGVsZW1lbnQucmVwbGFjZVdpdGgoc2Vjb25kc1RvTWludXRlcyhhdHRyLnNlY29uZHNUb01pbnV0ZXMpKTtcbiAgICB9XG4gIH07XG59KTtcbiIsImFuZ3VsYXIubW9kdWxlKCdhbmd1bGFydmlkZW8nKS5jb250cm9sbGVyICdWaWRlb3NDdHJsJywgKCRzY29wZSwgVmlkZW9zKS0+XG4gICAgJHNjb3BlLnZpZGVvcyA9IFtdXG4gICAgVmlkZW9zLmdldEFsbCgpLnRoZW4gKHZpZGVvcyktPlxuICAgICAgICAkc2NvcGUudmlkZW9zID0gdmlkZW9zLmRhdGFcbiAgICAsIChyZWFzb24pLT5cbiAgICAgICAgYWxlcnQocmVhc29uKVxuXG5cbiIsImFuZ3VsYXIubW9kdWxlKCdhbmd1bGFydmlkZW8nKS5jb250cm9sbGVyKCdWaWRlb3NDdHJsJywgZnVuY3Rpb24oJHNjb3BlLCBWaWRlb3MpIHtcbiAgJHNjb3BlLnZpZGVvcyA9IFtdO1xuICByZXR1cm4gVmlkZW9zLmdldEFsbCgpLnRoZW4oZnVuY3Rpb24odmlkZW9zKSB7XG4gICAgcmV0dXJuICRzY29wZS52aWRlb3MgPSB2aWRlb3MuZGF0YTtcbiAgfSwgZnVuY3Rpb24ocmVhc29uKSB7XG4gICAgcmV0dXJuIGFsZXJ0KHJlYXNvbik7XG4gIH0pO1xufSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=